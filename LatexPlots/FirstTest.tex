%\documentclass[12pt, a4paper , draft]{report}
\documentclass[12pt, a4paper]{report}
\usepackage[utf8]{inputenc}
\usepackage{a4}
%\usepackage[none]{hyphenat} %hyphenation

\usepackage{chngcntr}
\counterwithout{footnote}{chapter}

\usepackage[bottom,flushmargin]{footmisc}
\usepackage{setspace}
\usepackage[pdfborder={0 0 0}]{hyperref}
\usepackage{fancyhdr}
\sloppy
%TODO need to decide if i want indentation or not
\usepackage{parskip} %no indentation after paragraphs    
%\usepackage{umlaute}
%\usepackage{afterpage} %for using \afterpage{\clearpage} (don't push images to the end of a chapter)
%\usepackage{makeidx}
%\usepackage[numbers]{natbib}
\usepackage{graphicx}
%\usepackage{picins} %provides precise control over the placement of inline graphics

\usepackage{titlesec}
%\usepackage{dsfont} %math symbols
\usepackage{tabularx}
\usepackage{wrapfig}
\usepackage{gensymb}
\usepackage{caption} %used to do \\ during caption
\usepackage{enumitem}% http://ctan.org/pkg/enumitem

% Florian Schulze, 06.06.2012
% v1.0, latest edit: 06.06.2012

%\usepackage{enumitem} %resume counting from previous enumerate block
%\usepackage{amsmath,amssymb}
%\usepackage[format=default,font=footnotesize,labelfont=bf]{caption}
%\usepackage{listings} %for listing source code
%\usepackage{color}
%\usepackage{algpseudocode} %for listing pseudocode
%\usepackage{algorithm} %wrap algpseudocode and enrich with label etc.
%\usepackage{float} % for [H] after floats

\usepackage{listings}
\usepackage{color}
\usepackage{pgfplots}

\definecolor{dkgreen}{rgb}{0,0.6,0}
\definecolor{gray}{rgb}{0.5,0.5,0.5}
\definecolor{mauve}{rgb}{0.58,0,0.82}

\lstset{ %
	language=[Sharp]C,                % choose the language of the code
	basicstyle=\footnotesize,       % the size of the fonts that are used for the code
	numbers=left,                   % where to put the line-numbers
	numberstyle=\footnotesize,      % the size of the fonts that are used for the line-numbers
	stepnumber=1,                   % the step between two line-numbers. If it is 1 each line will be numbered
	numbersep=7pt,                  % how far the line-numbers are from the code
	backgroundcolor=\color{white},  % choose the background color. You must add \usepackage{color}
	showspaces=false,               % show spaces adding particular underscores
	showstringspaces=false,         % underline spaces within strings
	showtabs=false,                 % show tabs within strings adding particular underscores
	frame=single,           % adds a frame around the code
	tabsize=2,          % sets default tabsize to 2 spaces
	captionpos=b,           % sets the caption-position to bottom
	breaklines=true,        % sets automatic line breaking
	breakatwhitespace=false,    % sets if automatic breaks should only happen at whitespace
	escapeinside={\%*}{*)},          % if you want to add a comment within your code
	columns=fullflexible,
	xleftmargin=0.5cm
}

\newcommand{\branchf}{Branching Factor}
\newcommand{\leafs}{Leaf Size}
\newcommand{\leafi}{Leaf Intersection}
\newcommand{\nodei}{Node Intersection}
\newcommand{\sleafi}{Shadow Leaf Intersection}
\newcommand{\snodei}{Shadow Node Intersection}
\newcommand{\cost}{Cost Function}
\newcommand{\scost}{Shadow Cost Function}

%fcommands to manage plots.
\newcommand{\file}{xxx}
\newcommand{\labelText}{xxx}

\titleformat{\paragraph}[hang]{\normalfont\bfseries}{\theparagraph}{.5em}{}

\begin{document}


\pgfplotsset{
	every axis/.append style={
		scale only axis,
		width=0.8\textwidth,
%		height = 5.9cm
		mark size=4pt,
%		colormap = {blue}{rgb = (1,0,0), rgb = (0,0,1)},
		colorbar,
	}
}

Cost function right now is 1 * LeafIntersections + 1/8 * NodeIntersections



\renewcommand{\file}{Data/shiftHappensTable.txt}
\renewcommand{\labelText}{Shift happens \url{https://sketchfab.com/3d-models/shift-happens-canyon-diorama-ffd36dfbfda8432d97388988883f6295}. Low poly scene. 53,857 Vertices and 240,865 Triangles}
\input{plot0}

\newpage

\renewcommand{\file}{Data/sponzaTable.txt}
\renewcommand{\labelText}{Sponza \url{http://casual-effects.com/data/index.html}. Interior scene. 192,676 Vertices and 262,267 Triangles}
\input{plot0}

\newpage

\renewcommand{\file}{Data/rungholtTable.txt}
\renewcommand{\labelText}{Rungholt \url{http://casual-effects.com/data/index.html}. Large minecraft city. 11,630,990 Vertices and 5,815,444 Triangles}
\input{plot0}

\newpage

\renewcommand{\file}{Data/eratoTable.txt}
\renewcommand{\labelText}{Eratio \url{http://casual-effects.com/data/index.html}. Scan of a marble statue. 235,332 Vertices and 412,669 Triangles}
\input{plot0}

\newpage

\renewcommand{\file}{Data/AverageTable.txt}
\renewcommand{\labelText}{Average of all normalized results}
\input{plot0}

\newpage

First tests with 3D Plots, but i prefer the 2D Color representation since the 3D surface can be really hard to interpret.
\begin{tikzpicture}
\begin{axis}
[grid=both,
width = \textwidth,
height= 0.7\textwidth,
%	legend entries = {leaf Intersections},
%	enlargelimits=false , font = \tiny,
%	legend style={draw=none},
%	legend image post style={scale=0.5},
ylabel = leaf size,
xlabel = branching factor,
zlabel = leaf Intersections
%	y label style={at={(axis description cs:0.14,.5)},anchor=south},]
]
%faceted interp, scatter, point meta=\thisrow{childFullness}
%\addplot3[surf, point meta=\thisrow{leafFullness}, shader=interp] table[y = branchFactor, x =leafSize, z =  leafIntersections, col sep=comma]{Data/sponzaTable.txt};

%		\addplot3[surf, point meta={w} ] file {Data/TestData4D.txt};

\addplot3[contour filled={number=8, labels = {false}}, thick] table[y = leafSize, x = branchFactor, z = leafIntersections, col sep=comma] {Data/sponzaTable.txt};
\end{axis}
\end{tikzpicture}

\begin{tikzpicture}
\begin{axis}
[grid=both,
width = \textwidth,
height= 0.7\textwidth,
%	legend entries = {leaf Intersections},
%	enlargelimits=false , font = \tiny,
%	legend style={draw=none},
%	legend image post style={scale=0.5},
ylabel = leaf size,
xlabel = branching factor,
zlabel = node Intersections
colorbar style={Leaf Fullness}
%	y label style={at={(axis description cs:0.14,.5)},anchor=south},]
]
%faceted interp, scatter, point meta=\thisrow{childFullness}
\addplot3[surf, point meta=\thisrow{leafFullness}, shader=interp] table[x = branchFactor, y =leafSize, z =  nodeIntersections, col sep=comma]{Data/sponzaTable.txt};
%		\addplot3[surf, point meta={w} ] file {Data/TestData4D.txt};
\end{axis}
\end{tikzpicture}

\end{document}
